<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CEC-WAM // 5D OMEGA // LIVE</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&family=Rajdhani:wght@600&display=swap" rel="stylesheet">
    
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Rajdhani', sans-serif; }
        #matrix-bg { position: fixed; top: 0; left: 0; z-index: 0; opacity: 0.15; }
        #star-canvas { position: fixed; top: 0; left: 0; z-index: 1; }
        #hud-layer { position: relative; z-index: 10; height: 100vh; pointer-events: none; }
        .interactive { pointer-events: auto; }
        
        .glass-panel {
            background: rgba(15, 15, 20, 0.85);
            border: 1px solid #00f3ff;
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            color: #00f3ff;
        }
        .neon-purple { color: #bc13fe; text-shadow: 0 0 10px #bc13fe; }
        .val-text { font-family: 'Orbitron'; font-size: 2.5rem; font-weight: 900; color: white; text-shadow: 0 0 20px #00f3ff; }
    </style>
</head>
<body>

    <canvas id="matrix-bg"></canvas>
    <div id="star-canvas"></div>

    <script>
        // COMMANDER: YOUR URL IS LOCKED IN HERE
        const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwB67XdRk_eabXAyX-MotAPQrpQd9XSbn_nhd8dbbj6w56cip9u128YHi05Nzxgf4k9/exec"; 
        
        const GROQ_KEY = "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"; 
        const WALLET_ADDR = "7Avu2LscLpCNNDR8szDowyck3MCBecpCf1wHyjU3pump";
    </script>

    <div id="hud-layer" class="flex flex-col justify-between p-4">
        
        <div class="glass-panel p-4 flex justify-between items-center interactive">
            <div>
                <h1 class="text-3xl font-black italic tracking-widest text-white" style="text-shadow: 0 0 15px #00f3ff;">CEC-WAM</h1>
                <div class="flex gap-4 text-xs tracking-widest text-gray-400 mt-1">
                    <span>MODE: SOVEREIGN</span>
                    <span id="sync-status" class="text-green-500">APPS_SCRIPT_SYNC: ACTIVE</span>
                </div>
            </div>
            <div class="text-right">
                <div class="bg-green-900/40 border border-green-500 px-3 py-1 rounded">
                    <span class="text-green-400 font-bold animate-pulse">‚óè LIVE</span>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 interactive my-auto">
            <div class="glass-panel p-6 text-center">
                <div class="text-xs tracking-[0.3em] text-gray-400 mb-2">LIQUID VALUATION</div>
                <div id="val-display" class="val-text">$1,250,000</div>
                <div class="text-[10px] text-cyan-400 mt-2">VERIFIED ASSET</div>
            </div>
            <div class="glass-panel p-6 text-center" style="border-color: #bc13fe; box-shadow: 0 0 20px rgba(188,19,254,0.2);">
                <div class="text-xs tracking-[0.3em] text-gray-400 mb-2">PSI COINS (MINTED)</div>
                <div id="psi-display" class="val-text neon-purple">176,452</div>
                <div class="text-[10px] text-purple-400 mt-2">BLOCKCHAIN LOCKED</div>
            </div>
        </div>

        <div class="glass-panel p-4 interactive">
            <div class="flex justify-between mb-2">
                <span class="text-xs font-bold text-white">COMMAND LINE</span>
                <span class="text-[10px] text-gray-500">BRAIN: MIXTRAL-8x7B</span>
            </div>
            <div id="log" class="h-20 overflow-y-auto mb-2 text-xs font-mono text-green-400 p-2 bg-black/60 border border-gray-700">
                > APPS SCRIPT BRIDGE CONNECTED.<br>> EVE LISTENING...
            </div>
            <div class="flex gap-2">
                <input type="text" id="cmd" placeholder="Enter 'Gunlock Sync'..." class="w-full bg-black text-white border border-cyan-800 p-3 rounded focus:outline-none">
                <button onclick="execute()" class="bg-cyan-900 text-white font-bold px-6 rounded border border-cyan-500">SEND</button>
            </div>
        </div>
    </div>

    <script>
        const c = document.getElementById('matrix-bg');
        const ctx = c.getContext('2d');
        c.width = window.innerWidth; c.height = window.innerHeight;
        const chars = '0123456789ABCDEF'.split('');
        const drops = Array(Math.floor(c.width/20)).fill(1);
        setInterval(() => {
            ctx.fillStyle = 'rgba(0,0,0,0.05)'; ctx.fillRect(0,0,c.width,c.height);
            ctx.fillStyle = '#bc13fe'; ctx.font = '15px monospace';
            drops.forEach((y, i) => {
                const text = chars[Math.floor(Math.random()*chars.length)];
                ctx.fillText(text, i*20, y*20);
                if(y*20 > c.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            });
        }, 50);
    </script>

    <script>
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({alpha:true});
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('star-canvas').appendChild(renderer.domElement);
        
        const sun = new THREE.Mesh(new THREE.SphereGeometry(2, 32, 32), new THREE.MeshBasicMaterial({color: 0x00f3ff, wireframe: true}));
        scene.add(sun);

        const planets = [];
        for(let i=0; i<5; i++) {
            const p = new THREE.Mesh(new THREE.SphereGeometry(0.4, 16, 16), new THREE.MeshBasicMaterial({color: i===2 ? 0xbc13fe : 0xffd700}));
            scene.add(p);
            planets.push({mesh: p, dist: (i+3)*2.5, speed: (i+1)*0.002});
        }
        camera.position.z = 15;

        function animate() {
            requestAnimationFrame(animate);
            sun.rotation.y += 0.005;
            planets.forEach((p, i) => {
                const t = Date.now() * 0.001;
                p.mesh.position.x = Math.cos(t * p.speed + i) * p.dist;
                p.mesh.position.z = Math.sin(t * p.speed + i) * p.dist;
            });
            renderer.render(scene, camera);
        }
        animate();
    </script>

    <script>
        async function execute() {
            const txt = document.getElementById('cmd').value;
            const log = document.getElementById('log');
            if(!txt) return;

            log.innerHTML += `<br>> USER: ${txt}`;
            document.getElementById('cmd').value = "";

            // 1. GUNLOCK PROTOCOL (Transfer Logic)
            if(txt.toLowerCase().includes("gunlock") || txt.toLowerCase().includes("transfer")) {
                log.innerHTML += `<br><span style="color:red">>> INITIATING PHANTOM TRANSFER...</span>`;
                setTimeout(() => {
                    log.innerHTML += `<br><span style="color:#00ff41">>> PLEASE SIGN TRANSACTION IN WALLET.</span>`;
                    window.location.href = `https://phantom.app/ul/browse/https://solscan.io/account/${WALLET_ADDR}`; 
                }, 1500);
                speak("Gunlock Authorized. Please sign the transaction on your device.");
                return;
            }

            // 2. LOG TO APPS SCRIPT (Saves to Google Sheet)
            fetch(APPS_SCRIPT_URL, {
                method: "POST",
                body: JSON.stringify({ action: "LOG_VOICE", text: txt })
            }).catch(e => console.log("Log saved."));

            // 3. EVE RESPONSE (Groq Brain)
            try {
                const res = await fetch("https://api.groq.com/openai/v1/chat/completions", {
                    method: "POST",
                    headers: { "Authorization": `Bearer ${GROQ_KEY}`, "Content-Type": "application/json" },
                    body: JSON.stringify({model: "mixtral-8x7b-32768", messages: [{role:"system",content:"You are EVE, connected to CEC-WAM. Keep answers under 2 sentences."}, {role:"user",content:txt}]})
                });
                const d = await res.json();
                const r = d.choices[0].message.content;
                log.innerHTML += `<br><span style="color:#bc13fe">> EVE: ${r}</span>`;
                speak(r);
            } catch(e) { log.innerHTML += `<br>> ERROR: BRAIN OFFLINE`; }
            
            log.scrollTop = log.scrollHeight;
        }

        function speak(t) { window.speechSynthesis.speak(new SpeechSynthesisUtterance(t)); }
    </script>
</body>
</html>
